<!doctype html>
<html>
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://www.bsmijatim.org/favicon.ico" rel='icon' type='image/x-icon' />
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
    <title>PUSAT DATA COVID-19 INDONESIA</title>
</head>
<body>
<header style="margin-top:20px;">
  <div class="container"><center>
    <a href="https://www.bsmijatim.org"><img src="https://1.bp.blogspot.com/-FHd2HzjMViY/XlyAHHXid6I/AAAAAAAADdo/9LGV4_sAHiU0KZWpm1FeAcLRNhGH8jS1QCLcBGAsYHQ/s1600/logobsmiwebalpha.png" style="max-width:200px;"></a>
    <h1>PUSAT DATA COVID-19</h1>
  </center></div>
</header>

<data>
  <div class="container table-responsive">
  <h5 data-aos='zoom-in-up' style='margin:0px 0px 20px 10px;text-align:center;'></h5>
    <table class="table table-sm table-dark">
      <thead>
    <tr>
      <th scope="col">Hari</th>
      <th scope="col">Tanggal</th>
      <th scope="col">Total Kasus</th>
      <th scope="col">Sembuh</th>
      <th scope="col">Meninggal</th>
    </tr>
    </thead>
     <tbody>
      <div id="tabledata"></div>
     </tbody>
    </table><center><div class='dataspinner spinner-border'></div></center>
  </div>
<script>
function CSVToArray( strData, strDelimiter ){
        strDelimiter = (strDelimiter || ",");
        var objPattern = new RegExp(
            (
                // Delimiters.
                "(\\" + strDelimiter + "|\\r?\\n|\\r|^)" +

                // Quoted fields.
                "(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|" +

                // Standard fields.
                "([^\"\\" + strDelimiter + "\\r\\n]*))"
            ),
            "gi"
            );
        var arrData = [[]];
        var arrMatches = null;
        while (arrMatches = objPattern.exec( strData )){
            var strMatchedDelimiter = arrMatches[ 1 ];
            if (
                strMatchedDelimiter.length &&
                strMatchedDelimiter !== strDelimiter
                ){
                arrData.push( [] );

            }

            var strMatchedValue;
            if (arrMatches[ 2 ]){
                strMatchedValue = arrMatches[ 2 ].replace(
                    new RegExp( "\"\"", "g" ),
                    "\""
                    );

            } else {
                strMatchedValue = arrMatches[ 3 ];

            }

            arrData[ arrData.length - 1 ].push( strMatchedValue );
        }
        return( arrData );
    }
    
$(document).ready(function() {
  $.ajax({
       url:"https://cors-anywhere.herokuapp.com/https://docs.google.com/spreadsheets/d/e/2PACX-1vR_Yc7b4VM02Jhiwl7XnsaAfjMHGd6PO9yp74JmIpe91M1f3rdXVpLWeTsxd3SFh5UJbh1-khVDTnMx/pub?output=csv",
       //dataType: 'json',
       type:'GET',
       headers: {"X-Requested-With": "some value"},
       success:function(data,status, xhr){
           var dataq = xhr.responseText;//console.log(dataq);
           var data = CSVToArray(dataq);
           //console.log(data);
           for (var i = data.length-1 ; i > 0  ; i--) {
             $('data table tbody').append('<tr><th>'+data[i][0]+'</th><th>'+data[i][1]+'</th><th>'+data[i][2]+'</th><th>'+data[i][3]+'</th><th>'+data[i][4]+'</th></tr>');
           }
           $( ".dataspinner" ).toggle();
       },
       error:function(){
           console.log("Error");
       }  
  })
});
</script>
</data>


<bsmipost>
<script type='text/javascript'>
//<![CDATA[
imgr=new Array();imgr[0]="https://1.bp.blogspot.com/-pFVpXlHnnaQ/VyyryYCS-ZI/AAAAAAAAAD0/d8aHOjIL8HUzMfQFopFD4fVB5g70l3z3QCLcB/s2000/logo%2Bbsmi%2Bnew.jpg";showRandomImg=true;aBold=true;summaryPost=100;summaryPost1=140;summaryTitle=25;numposts1=12;numposts2=6;numposts3=4;numposts4=5;numposts5=10;numposts6=5;numposts8=1;

function removeHtmlTag(strx,chop){var s=strx.split("<");for(var i=0;i<s.length;i++){if(s[i].indexOf(">")!=-1){s[i]=s[i].substring(s[i].indexOf(">")+1,s[i].length)}}s=s.join("");s=s.substring(0,chop-1);return s}

function postrecentbsmijatim(json){
j=(showRandomImg)?Math.floor((imgr.length+1)*Math.random()):0;
img=new Array();

for(var i=0;i<4;i++){
  var entry=json.feed.entry[i];
  var posttitle=entry.title.$t;
  var pcm;
  var posturl;
  if(i==json.feed.entry.length)break;
  for(var k=0;k<entry.link.length;k++){
    if(entry.link[k].rel=='alternate'){posturl=entry.link[k].href;break}}

  for(var k=0;k<entry.link.length;k++){if(entry.link[k].rel=='replies'&&entry.link[k].type=='text/html'){pcm=entry.link[k].title.split(" ")[0];break}}

  if("content"in entry){var postcontent=entry.content.$t}
  else if("summary"in entry){var postcontent=entry.summary.$t}
  else var postcontent="";postdate=entry.published.$t;

  if(j>imgr.length-1)j=0;
  img[i]=imgr[j];
  s=postcontent;a=s.indexOf("<img");
  b=s.indexOf("src=\"",a);c=s.indexOf("\"",b+5);
  d=s.substr(b+5,c-b-5);if((a!=-1)&&(b!=-1)&&(c!=-1)&&(d!=""))img[i]=d;
  var month=[1,2,3,4,5,6,7,8,9,10,11,12];
  var month2=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];
  var day=postdate.split("-")[2].substring(0,2);
  var m=postdate.split("-")[1];var y=postdate.split("-")[0];
  for(var u2=0;u2<month.length;u2++){if(parseInt(m)==month[u2]){m=month2[u2];break}}
  var daystr=day+' '+m+' '+y;
  var jpg = img[i].replace("s320","s1600");
  var trtd='<div class="item col-md-6 col-lg-3" style=""><a href="'+posturl+'"><div class="isi" data-aos="zoom-in-up" style="width:100%;height:100%;background-image:url('+jpg+');padding:50px 50px;"><p>'+posttitle+' <br/><span style="color:#969696;font-size:10px">'+daystr+'</span></p></div></a></div>';
  //document.write(trtd);
  document.getElementById("bsmipost").innerHTML += trtd;
  j++
  }$( ".giatspinner" ).toggle();
}
//]]>
</script>
<div class='container'>
<h5 data-aos='zoom-in-up' style='margin:0px 0px 20px 10px;text-align:center;'>CORONA UPDATE</h5>
<div class='row' id='bsmipost'>
<script>
//<![CDATA[
var startIndex = 1;
var maxResults = 4;
function sendQueryPost()
{
   var scpt = document.createElement("script");
   scpt.src = "https://www.bsmijatim.org/feeds/posts/default/-/covid19?alt=json-in-script&orderby=published&callback=postrecentbsmijatim&start-index=" + startIndex + "&max-results=" + maxResults;

   document.body.appendChild(scpt);
   startIndex += 4;maxResults += 4;
}

$(document).ready(function() {
sendQueryPost();

});
//]]>
</script>
</div><center><a data-aos='zoom-in-up' href='#' onclick='$( ".giatspinner" ).toggle();sendQueryPost();return false'>more<div class='giatspinner spinner-border'></div><i class='fas fa-spinner fa-spin'></i></a></center>
</div>
<style>

bsmipost {
margin:30px auto;
display:block;
}

bsmipost .item{
margin-bottom:20px;
	overflow:hidden;
  height:250px;
    background-size:cover;
  background-position:center center;
border-radius:20px 20px 20px 20px;
  }

bsmipost .item .isi{
	overflow:hidden;
  height:500px;
  background:#fff;
    background-size:cover;
  background-position:center center;
  background-color: #dc3545;
  background-blend-mode: multiply;
	border-radius:20px 20px 20px 20px;
  }

bsmipost .item .isi:hover{
    -ms-transform: scale(1.2);
    -moz-transform: scale(1.2);
    -webkit-transform: scale(1.2);
    -o-transform: scale(1.2);
    transform: scale(1.2);
  background-color: red;
  background-blend-mode: normal;
border-radius:20px 20px 20px 20px;
}

bsmipost .item .isi p {
position:absolute;
bottom:15px;
background:#fff;
width:80%;
padding:5px 10px;
color:red;
left:30px;
border-radius:5px 5px 5px 5px;
}
</style>
</bsmipost>

    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
</body>
</html>